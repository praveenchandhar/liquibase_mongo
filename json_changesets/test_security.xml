<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mongodb="http://www.liquibase.org/xml/ns/dbchangelog-ext"
    xsi:schemaLocation="
        http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.5.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
    <!-- VALIDATION REPORT -->
    <!-- ⚠️ WARNINGS: -->
    <!-- ================================================== -->
    <!-- 1. Header: Missing recommended header field: @version -->
    <!-- 2. Operation 1 (line 1): Found 'new Date()' - converting to 'ISODate()' format -->
    <!-- ✅ Liquibase XML generated successfully, but please review warnings above. -->
    <!-- END VALIDATION REPORT -->

    <changeSet id="1.1" author="praveenchandhar" context="liquibase_test">
        <!-- INSERTONE operation on security_test (from line 1) -->
        <mongodb:insertOne collectionName="security_test">
            <mongodb:document><![CDATA[
            { test_id: "security_001", created_date: ISODate(), description: "Testing secure changeset generation", status: "active" }
            ]]></mongodb:document>
        </mongodb:insertOne>
    </changeSet>
    <changeSet id="1.2" author="praveenchandhar" context="liquibase_test">
        <!-- CREATEINDEX operation on security_test (from line 7) -->
        <mongodb:runCommand>
            <mongodb:command><![CDATA[
            {
                "createIndexes": "security_test",
                "indexes": [
                    {
                        "key": {
       test_id: 1
   },
                        "name": "idx_security_test_id"
                    }
                ]
            }
            ]]></mongodb:command>
        </mongodb:runCommand>
    </changeSet>
</databaseChangeLog>